(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"8a51":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{staticClass:"w-80 q-mx-auto q-px-auto",attrs:{id:"postNew"}},[r("div",{staticClass:"w-100 col self-center"},[r("q-form",{staticClass:"row q-gutter-md w-100",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)},reset:t.reset}},[r("q-input",{staticClass:"col-12 bg-white",attrs:{filled:"",type:"text",label:"標題","label-for":"input-title",hint:"請輸入問題","lazy-rules":"",error:!t.rules.title,"error-message":"標題不能為空",autofocus:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),r("q-editor",{staticClass:"col-12",attrs:{filled:"",type:"textarea",label:"內容","label-for":"input-contents",hint:"請輸入說明","lazy-rules":"",error:!t.rules.contents,"error-message":"內容不能為空",dense:t.$q.screen.lt.md,toolbar:[[{label:"標題",icon:t.$q.iconSet.editor.formatting,fixedLabel:!0,options:["p","h1","h2","h3","h4","h5","h6","code"]}],[{label:"段落",icon:t.$q.iconSet.editor.align,fixedLabel:!0,options:["quote","unordered","ordered","outdent","indent","left","center","right","justify"]}],[{label:"字體",icon:t.$q.iconSet.editor.font,fixedLabel:!0,options:["bold","italic","strike","underline","subscript","superscript"]}],[{label:"字型",fixedLabel:!0,options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],[{label:"字型大小",icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]}],["token","hr","link","custom_btn"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:t.form.contents,callback:function(e){t.$set(t.form,"contents",e)},expression:"form.contents"}}),r("img-inputer",{staticClass:"col-12",staticStyle:{height:"300px"},attrs:{theme:"dark",size:"large",placeholder:"點擊或拖曳選擇圖片","bottom-text":"點擊或拖曳以修改"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),r("br"),r("div",{staticClass:"col-12 row justify-end"},[r("q-btn",{staticClass:"q-ml-sm col-2",attrs:{label:"送出",type:"submit",color:"primary"}}),r("q-btn",{staticClass:"q-ml-sm col-2",attrs:{label:"重設",type:"reset",color:"primary"}})],1)],1),r("div")],1)])},a=[],n=r("c973"),s=r.n(n),i=(r("96cf"),r("99af"),r("d81d"),{data:function(){return{posts:[],form:{title:"",contents:"",image:null,_id:"",author:""}}},computed:{rules:function(){var t=this.form.title,e=this.form.contents;return{title:0===t.length?null:t.length>=0,contents:0===e.length?null:e.length>=0}}},methods:{reset:function(){this.form.title="",this.form.contents="",this.form.image=""},editPost:function(t){this.form={title:this.posts[t].title,contents:this.posts[t].contents,image:this.posts[t].image,_id:this.posts[t]._id,index:t}},submit:function(){var t=this;return s()(regeneratorRuntime.mark((function e(){var r,o,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o in e.prev=0,r=new FormData,t.form)r.append(o,t.form[o]);if(0!==t.form._id.length){e.next=8;break}return e.next=6,t.axios.post("/posts",r,{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 6:e.next=13;break;case 8:return e.next=10,t.axios.patch("/posts/"+t.form._id,r,{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 10:a=e.sent,n=a.data,t.posts[t.form.index]={title:t.form.title,contents:t.form.contents,image:"".concat("https://tiec-forum.herokuapp.com","/files/").concat(n.result.image),_id:t.form._id,author:t.$store.state.user.account};case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤"}),console.log(e.t0);case 19:t.submitDisable=!1;case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))()}},mounted:function(){var t=this;return s()(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/posts");case 3:r=e.sent,o=r.data,t.posts=o.result.map((function(t){return t.image&&(t.image="".concat("https://tiec-forum.herokuapp.com","/files/").concat(t.image)),t})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),l=i,c=r("2877"),u=r("9989"),m=r("0378"),d=r("27f9"),f=r("d66b"),p=r("9c40"),h=r("eebe"),b=r.n(h),g=Object(c["a"])(l,o,a,!1,null,null,null);e["default"]=g.exports;b()(g,"components",{QPage:u["a"],QForm:m["a"],QInput:d["a"],QEditor:f["a"],QBtn:p["a"]})}}]);