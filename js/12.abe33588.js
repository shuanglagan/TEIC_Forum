(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{ae74:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-ma-md"},[a("div",{staticClass:"row justify-around"},[a("q-btn",{staticClass:"col-md-auto col-2",attrs:{label:"card",color:"primary"},on:{click:function(e){t.form.card=!0}}},[a("q-dialog",{attrs:{persistent:""},model:{value:t.form.card,callback:function(e){t.$set(t.form,"card",e)},expression:"form.card"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("q-input",{staticClass:"col-12",attrs:{filled:"",type:"text",label:"標題","label-for":"input-title",hint:"請輸入問題","lazy-rules":"",error:!t.rules.title,"error-message":"標題不能為空",autofocus:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),a("q-editor",{staticClass:"col-12",attrs:{filled:"",type:"textarea",label:"內容","label-for":"input-contents",hint:"請輸入說明","lazy-rules":"",error:!t.rules.contents,"error-message":"內容不能為空"},model:{value:t.form.contents,callback:function(e){t.$set(t.form,"contents",e)},expression:"form.contents"}}),a("img-inputer",{staticClass:"col justify-center",attrs:{theme:"dark",size:"large",placeholder:"點擊或拖曳選擇圖片","bottom-text":"點擊或拖曳以修改"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),a("br"),a("div",{staticClass:"col-12 row justify-end"},[a("q-btn",{staticClass:"q-ml-sm col-2",attrs:{label:"送出",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm col-2",attrs:{label:"重設",type:"reset",color:"primary"}})],1)],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"送出",type:"submitC"}}),a("q-btn",{attrs:{flat:"",label:"重設",type:"resetC"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"}})],1)],1)],1)],1),a("q-btn",{staticClass:"col-md-auto col-2",attrs:{label:"form",color:"primary"},on:{click:function(e){t.form.formm=!0}}},[a("q-dialog",{attrs:{persistent:""},model:{value:t.form.formm,callback:function(e){t.$set(t.form,"formm",e)},expression:"form.formm"}},[a("q-form",{staticClass:"q-gutter-md",on:{submit:function(e){return e.preventDefault(),t.submitF.apply(null,arguments)},reset:t.resetF}},[a("q-input",{attrs:{filled:"",type:"text",label:"問題","label-for":"input-title",hint:"請輸入問題","lazy-rules":"",error:!t.rules.titleF,"error-message":"標題不能為空",autofocus:""},model:{value:t.form.titleF,callback:function(e){t.$set(t.form,"titleF",e)},expression:"form.titleF"}}),a("q-input",{attrs:{filled:"",type:"text",label:"詳細說明","label-for":"input-contents",hint:"請輸入說明","lazy-rules":"",error:!t.rules.contentsF,"error-message":"說明不能為空"},model:{value:t.form.contentsF,callback:function(e){t.$set(t.form,"contentsF",e)},expression:"form.contentsF"}}),a("br"),a("div",{staticClass:"row justify-end"},[a("q-btn",{attrs:{label:"送出",type:"submitF",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"重設",type:"resetF",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{flat:"",label:"取消"}})],1)],1)],1)],1)],1)])},l=[],s=a("c973"),o=a.n(s),n=(a("96cf"),a("99af"),a("d81d"),{data:function(){return{posts:[],columns:[{name:"rowNumber",align:"left",label:"#",field:function(t){return t.rowNumber},sortable:!0},{name:"image",label:"圖片",field:"image"},{name:"title",label:"標題",field:"title",sortable:!0},{name:"follows",label:"追蹤",field:"follows",sortable:!0},{name:"emoji",label:"emoji",field:"emoji",sortable:!0},{name:"date",label:"日期",field:"date",sortable:!0}],field:[{key:"image",label:"圖片"},{key:"title",label:"標題"},{key:"follows",label:"追蹤"},{key:"emoji",label:"emoji"},{key:"date",label:"日期"}],form:{card:!1,titleC:"",contentsC:"",formm:!1,titleF:"",contentsF:"",title:"",contents:"",image:null,_id:""}}},computed:{rules:function(){var t=this.form.titleC,e=this.form.contentsC,a=this.form.titleF,r=this.form.contentsF,l=this.form.title,s=this.form.contents;return{titleC:0===t.length?null:t.length>=0,contentsC:0===e.length?null:e.length>=0,titleF:0===a.length?null:a.length>=0,contentsF:0===r.length?null:r.length>=0,title:0===l.length?null:l.length>=0,contents:0===s.length?null:s.length>=0}}},methods:{resetC:function(){this.form.titleC="",this.form.contentsC=""},resetF:function(){this.form.titleF="",this.form.contentsF=""},reset:function(){this.form.title="",this.form.contents=""},editPost:function(t){this.form={title:this.posts[t].title,contents:this.posts[t].contents,image:this.posts[t].image,_id:this.posts[t]._id,index:t}},submit:function(){var t=this;return o()(regeneratorRuntime.mark((function e(){var a,r,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in e.prev=0,a=new FormData,t.form)a.append(r,t.form[r]);if(0!==t.form._id.length){e.next=8;break}return e.next=6,t.axios.post("/posts",a,{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 6:e.next=13;break;case 8:return e.next=10,t.axios.patch("/posts/"+t.form._id,a,{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 10:l=e.sent,s=l.data,t.posts[t.form.index]={title:t.form.title,contents:t.form.contents,image:"".concat("","/files/").concat(s.result.image),_id:t.form._id};case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤"}),console.log(e.t0);case 19:t.submitDisable=!1;case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))()}},mounted:function(){var t=this;return o()(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/posts");case 3:a=e.sent,r=a.data,t.posts=r.result.map((function(t){return t.image&&(t.image="".concat("","/files/").concat(t.image)),t})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),i=n,c=a("2877"),m=a("9c40"),u=a("24e8"),f=a("f09f"),p=a("a370"),d=a("27f9"),b=a("d66b"),h=a("4b7e"),g=a("0378"),v=a("9564"),y=a("eaac"),x=a("9f0a"),C=a("adad"),w=a("823b"),q=a("7f67"),k=a("eebe"),F=a.n(k),Q=Object(c["a"])(i,r,l,!1,null,null,null);e["default"]=Q.exports;F()(Q,"components",{QBtn:m["a"],QDialog:u["a"],QCard:f["a"],QCardSection:p["a"],QInput:d["a"],QEditor:b["a"],QCardActions:h["a"],QForm:g["a"],QToggle:v["a"],QTable:y["a"],QOptionGroup:x["a"],QTabPanels:C["a"],QTabPanel:w["a"]}),F()(Q,"directives",{ClosePopup:q["a"]})}}]);